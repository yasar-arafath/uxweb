window.Theme=window.Theme||{name:"Albers",menuScrollThrottle:10,viewports:{SMALL:414,MEDIUM:768,LARGE:1024},contrastColors:{DARK:"#0F0F0F",LIGHT:"#F5F5F5"},REFRAMEABLE_ASSET_TYPES:["blog","gallery"],init:function(){this.Turbolinks.init(),this.reload()},reload:function(){FastClick.attach(document.body),_4ORMAT_DATA.theme.auto_headline_color&&this.setTextContrast(),this.bindEvents(),this.initJSForPageType();var e=(window._4ORMAT_DATA.page.nested||window._4ORMAT_DATA.page).type;this.REFRAMEABLE_ASSET_TYPES.indexOf(e)>-1&&reframe("iframe")},bindEvents:function(){$(".nav-trigger").on("click",this.Menu.toggle),this.bindScrollDelta(),$(window).on("resize",function(){$(window).width()<=Theme.viewports.MEDIUM?Theme.setMenuAndContainerTopOffset(!0):(Theme.setMenuAndContainerTopOffset(!0),$(".header").removeClass("hidden"),Theme.Menu.hide())}),$(document).on("lazybeforeunveil",function(e){$(e.target).on("load",function(){$(this).parents(".asset").length&&$(this).parents(".asset").addClass("asset-loaded")})}),$(document).keyup(function(e){27==e.keyCode&&Theme.Menu.hide()})},bindScrollDelta:function(){$(window).on("scrolldelta",function(e){if(($(window).width()<=Theme.viewports.MEDIUM||_4ORMAT_DATA.theme.menu_always_hide_on_scroll)&&!$(".menu").hasClass("active")){var n=e.scrollTopDelta;n>1&&n>=Theme.menuScrollThrottle&&e.scrollTop>$(".header").outerHeight()?$(".header").addClass("hidden"):n<1&&n<=-1*Theme.menuScrollThrottle&&$(".header").removeClass("hidden"),0===e.scrollTop&&$(".header").removeClass("hidden")}})},initJSForPageType:function(){var e=_4ORMAT_DATA.page.type.charAt(0).toUpperCase()+_4ORMAT_DATA.page.type.slice(1);window.Theme.hasOwnProperty(e)&&window.Theme[e].init()},setTextContrast:function(){$(".adaptive-color").each(function(){if(_4ORMAT_DATA.theme.shade_cover_images)$(this).css("color","#ffffff"),$(this).find(".guillemet-icon").find("path").css("fill","#ffffff");else{var e=$(this).attr("data-dominant-color").replace("#",""),n=window.Theme.getContrastYIQ(e),t=window.Theme.contrastColors[n];$(this).css("color",t),$(this).find(".guillemet-icon").find("path").css("fill",t)}})},setMenuAndContainerTopOffset:function(e){var n,t=$("html").attr("data-header-height");null==e&&(e=!1),t==undefined||e?$(".wrapper, .f_blog_wrapper").delay(1).queue(function(){n=$(".header").outerHeight(),$("html").attr("data-header-height",n),$(".menu").css("top",n),$(".wrapper, .f_blog_wrapper").css("margin-top",n),setTimeout(function(){$("main").removeClass("is-hidden"),$(".wrapper, .f_blog_wrapper").dequeue()},0)}):(t=parseInt(t,10),$(".menu").css("top",t),$(".wrapper, .f_blog_wrapper").css("margin-top",t),setTimeout(function(){$("main").addClass("is-hidden"),$("main").removeClass("is-hidden")},0))},getContrastYIQ:function(e){return(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3>=128?"DARK":"LIGHT"},isInIframe:function(){return null!==window.frameElement},transitionEnd:function(){var e,n=document.createElement("transitionElement"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in t)if(n.style[e]!==undefined)return t[e]}},window.Theme.Menu=window.Theme.Menu||{toggle:function(e){$(e.currentTarget).toggleClass("active"),$(".menu").toggleClass("active"),$("body").toggleClass("menu-open lock-scroll")},show:function(){$(".nav-trigger").addClass("active"),$(".menu").addClass("active"),$("body").addClass("menu-open lock-scroll")},hide:function(){$(".nav-trigger").removeClass("active"),$(".menu").removeClass("active"),$("body").removeClass("menu-open lock-scroll")}},window.Theme.Turbolinks=window.Theme.Turbolinks||{init:function(){$(window).on("page:update",this.onUpdate.bind(this)),$(window).on("page:before-change",this.onBeforeChange.bind(this)),$(window).on("page:load",this.onPageLoad.bind(this)),$(window).on("page:before-unload",this.onBeforeUnload.bind(this)),$(window).on("page:restore",this.onRestore.bind(this))},onBeforeUnload:function(){$("body").removeClass("is-changing")},onPageLoad:function(){window.Theme.setMenuAndContainerTopOffset(!0)},onBeforeChange:function(e){if(e.preventDefault(),$("body").addClass("is-changing"),$(".menu").hasClass("active")){Theme.Menu.hide();var n=Theme.transitionEnd();$(".menu").one(n,function(){$("main:not(.listing-wrapper)").addClass("is-hidden"),Turbolinks.visit(e.originalEvent.data.url)})}else $("main:not(.listing-wrapper)").addClass("is-hidden"),Turbolinks.visit(e.originalEvent.data.url)},onUpdate:function(){window.Theme.reload()},onRestore:function(){$(".listing-spacer").remove(),$("main").removeClass("is-hidden"),window.Theme.bindEvents()}},window.Theme.Listing=window.Theme.Listing||{init:function(){this.bindListingClicks(),$(".listing-asset.is-full-screen").css({height:$(window).height()-$(".header").outerHeight()})},bindListingClicks:function(){$(".listing-asset-anchor").on("click",function(e){if(!(e.ctrlKey||e.shiftKey||e.metaKey||e.button&&1===e.button)){var n=($(this).attr("href"),$(this).attr("data-link-type")),t=$(this).offset().top-$(".header").outerHeight();if("external"===n&&Theme.isInIframe())return e.preventDefault(),!1;$spacer=$("<div />",{"class":"listing-spacer",width:"100%",height:"2000px"}),$(".listing-wrapper").append($spacer),$("html, body").animate({scrollTop:t},250)}})}},$(document).on("DOMContentLoaded",function(){Theme.init()}),$(window).on("load",function(){Theme.Turbolinks.onPageLoad()});